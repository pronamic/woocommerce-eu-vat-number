jQuery(function(){const a=wc_eu_vat_params.use_shipping_country,c="#woocommerce_eu_vat_number_field",n="#woocommerce_eu_vat_number_shipping_field";function t(e,r){r?(e.find("label .optional").remove(),e.addClass("validate-required"),0===e.find("label .required").length&&e.find("label").append('<abbr class="required" title="'+wc_address_i18n_params.i18n_required_text+'">*</abbr>')):(e.find("label .required").remove(),e.removeClass("validate-required woocommerce-invalid woocommerce-invalid-required-field"),0===e.find("label .optional").length&&e.find("label").append('<span class="optional">('+wc_address_i18n_params.i18n_optional_text+")</span>"))}function e(){var e=jQuery("#billing_country").val(),r=jQuery("#shipping_country").val(),o=jQuery("#ship-to-different-address-checkbox").is(":checked"),o=a&&r&&o,r=o?r:e,e=wc_eu_vat_params.eu_countries,i=wc_eu_vat_params.b2b_required,o=o?jQuery(n):jQuery(c);t(o,!1),r&&0<=jQuery.inArray(r,e)?(o.fadeIn(),"yes"===i&&t(o,!0)):o.fadeOut()}jQuery("form.checkout, form#order_review").on("change","#billing_country",e),jQuery("#billing_country").trigger("change"),a&&(jQuery("form.checkout, form#order_review").on("change","#shipping_country",e),jQuery("#shipping_country").trigger("change")),jQuery("form.checkout, form#order_review").on("change","#ship-to-different-address-checkbox",function(){a&&(jQuery("#ship-to-different-address-checkbox").is(":checked")?(jQuery(c).fadeOut(),jQuery("#shipping_country")):(jQuery(n).fadeOut(),jQuery("#billing_country"))).trigger("change")}),jQuery("#ship-to-different-address-checkbox").trigger("change"),jQuery("form.checkout, form#order_review").on("change",c,function(){jQuery("body").trigger("update_checkout")}),a&&jQuery("form.checkout, form#order_review").on("change",n,function(){jQuery("body").trigger("update_checkout")}),jQuery(document.body).on("updated_checkout",function(e,r){var o=jQuery("#shipping_country").val(),i=jQuery("#ship-to-different-address-checkbox").is(":checked"),o=a&&o&&i?jQuery(n):jQuery(c);o.is(":visible")&&($vat_code=o.val(),$vat_field_wrapper=o.closest(".form-row"),"success"===r.result?$vat_code.length||$vat_field_wrapper.removeClass("woocommerce-validated"):r.messages.length&&r.messages.includes($vat_code.toUpperCase())&&($vat_field_wrapper.removeClass("woocommerce-validated"),$vat_field_wrapper.addClass("woocommerce-invalid")))})});
