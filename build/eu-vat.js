(()=>{"use strict";window.jQuery,jQuery((function(){const e=wc_eu_vat_params.use_shipping_country,r="#woocommerce_eu_vat_number_field",o="#woocommerce_eu_vat_number_shipping_field";function i(e,r){r?(e.find("label .optional").remove(),e.addClass("validate-required"),0===e.find("label .required").length&&e.find("label").append('<abbr class="required" title="'+wc_address_i18n_params.i18n_required_text+'">*</abbr>')):(e.find("label .required").remove(),e.removeClass("validate-required woocommerce-invalid woocommerce-invalid-required-field"),0===e.find("label .optional").length&&e.find("label").append('<span class="optional">('+wc_address_i18n_params.i18n_optional_text+")</span>"))}function n(){const n=jQuery("#billing_country").val(),c=jQuery("#shipping_country").val(),a=jQuery("#ship-to-different-address-checkbox").is(":checked"),t=e&&c&&a,u=t?c:n,s=wc_eu_vat_params.eu_countries,d=wc_eu_vat_params.b2b_required,l=t?jQuery(o):jQuery(r);i(l,!1),u&&jQuery.inArray(u,s)>=0?(l.fadeIn(),"yes"===d&&i(l,!0)):l.fadeOut()}jQuery("form.checkout, form#order_review").on("change","#billing_country",n),jQuery("#billing_country").trigger("change"),e&&(jQuery("form.checkout, form#order_review").on("change","#shipping_country",n),jQuery("#shipping_country").trigger("change")),jQuery("form.checkout, form#order_review").on("change","#ship-to-different-address-checkbox",(function(){e&&(jQuery("#ship-to-different-address-checkbox").is(":checked")?(jQuery(r).fadeOut(),jQuery("#shipping_country").trigger("change")):(jQuery(o).fadeOut(),jQuery("#billing_country").trigger("change")))})),jQuery("#ship-to-different-address-checkbox").trigger("change"),jQuery("form.checkout, form#order_review").on("change",r,(function(){jQuery("body").trigger("update_checkout")})),e&&jQuery("form.checkout, form#order_review").on("change",o,(function(){jQuery("body").trigger("update_checkout")})),jQuery(document.body).on("updated_checkout",(function(i,n){const c=jQuery("#shipping_country").val(),a=jQuery("#ship-to-different-address-checkbox").is(":checked"),t=e&&c&&a?jQuery(o):jQuery(r);if(!t.is(":visible"))return;const u=t.val(),s=t.closest(".form-row");"success"!==n.result?n.messages.length&&n.messages.includes(u.toUpperCase())&&(s.removeClass("woocommerce-validated"),s.addClass("woocommerce-invalid")):u.length||s.removeClass("woocommerce-validated")}))}))})();