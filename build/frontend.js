(window.webpackJsonp_woocommerce_eu_vat_number=window.webpackJsonp_woocommerce_eu_vat_number||[]).push([[2],{20:function(e,t,n){}}]),function(e){function t(t){for(var r,i,a=t[0],u=t[1],s=t[2],d=0,p=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);p.length;)p.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window.webpackJsonp_woocommerce_eu_vat_number=window.webpackJsonp_woocommerce_eu_vat_number||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var l=u;c.push([21,2]),n()}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var c=typeof r;if("string"===c||"number"===c)e.push(r);else if(Array.isArray(r)){if(r.length){var i=o.apply(null,r);i&&e.push(i)}}else if("object"===c)if(r.toString===Object.prototype.toString)for(var a in r)n.call(r,a)&&r[a]&&e.push(a);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r=n(15),o=n(16),c=n(17),i=n(19);e.exports=function(e,t){return r(e)||o(e,t)||c(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=n(1);t.a=function(e){var t=e.defaultTitle,n=void 0===t?Object(r.__)("Step","woocommerce-eu-vat-number"):t,o=e.defaultDescription,c=void 0===o?Object(r.__)("Step description text.","woocommerce-eu-vat-number"):o,i=e.defaultShowStepNumber;return{title:{type:"string",default:n},description:{type:"string",default:c},showStepNumber:{type:"boolean",default:void 0===i||i}}}},,function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"woocommerce/eu-vat-number","version":"1.0.0","title":"EU VAT Number","parent":["woocommerce/checkout-fields-block"],"category":"woocommerce","icon":"cart","description":"The EU VAT Number extension lets you collect and validate EU VAT numbers during checkout to identify B2B transactions verses B2C. IP Addresses can also be validated to ensure they match the billing address. EU businesses with a valid VAT number can have their VAT removed prior to payment.","supports":{"html":false},"textdomain":"woocommerce-eu-vat-number","editorScript":"file:./build/index.js","editorStyle":"file:./build/index.css","style":"file:./build/index.css","attributes":{"lock":{"type":"object","default":{"remove":true,"move":false}}}}')},function(e,t){e.exports=window.wc.blocksCheckout},function(e,t){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wc.wcSettings},function(e,t){e.exports=window.wp.data},,,function(e,t){e.exports=window.wp.compose},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],_n=!0,i=!1;try{for(n=n.call(e);!(_n=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);_n=!0);}catch(e){i=!0,o=e}finally{try{_n||null==n.return||n.return()}finally{if(i)throw o}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(18);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},,function(e,t,n){"use strict";n.r(t);var r,o=n(9),c=n.n(o),i=n(2),a=n.n(i),u=n(0),s=n(8),l=n(1),d=n(7),p=n(4),m=n.n(p),b=n(14),f=n(10),v=n(3),h=n.n(v),_=n(11),w=function(e){var t=e.shouldValidateIp,n=e.billingCountry,r=e.ipAddress,o=e.ipCountry,c=e.validation,i=e.checkoutExtensionData,d=Object(f.getSetting)("allowedCountries",{}),p=i.setExtensionData,b=n;d[n]&&(b=d[n]);var v=Object(_.useSelect)((function(e){return e("wc/store/cart").getCartData()})).extensions["woocommerce-eu-vat-number"].cart_has_digital_goods,h=c.setValidationErrors,w=c.clearValidationError,O=c.getValidationError,g=Object(u.useState)(!1),j=m()(g,2),y=j[0],x=j[1],E=Object(u.useState)(!1),k=m()(E,2),S=k[0],A=k[1],N="billing_vat_number_ip_address_notice",P=Object(l.sprintf)(
/* translators: %1$s is the user's IP address, %2$s is the billing country name */
Object(l.__)("Your IP Address (%1$s) does not match your billing country (%2$s). European VAT laws require your IP address to match your billing country when purchasing digital goods in the EU. Please confirm you are located within your billing country using the checkbox above.","woocommerce-eu-vat-number"),r,b),T=t&&v&&n!==o;if(Object(u.useEffect)((function(){return!y&&T&&h(a()({},N,{message:P,hidden:!S})),y&&w(N),function(){w(N)}}),[h,y,S]),!T)return null;var C=O(N);return Object(u.createElement)("div",{className:"wc-eu-vat-checkout-ip-notice"},Object(u.createElement)("div",{className:"wc-eu-vat-checkout-ip-notice__checkbox-container"},Object(u.createElement)(s.CheckboxControl,{name:"location_confirmation",className:!1===(null==C?void 0:C.hidden)?"has-error":"",label:Object(u.createInterpolateElement)(Object(l.sprintf)(
/* translators: %s is the billing country full name, e.g. Finland, France, or Spain. */
Object(l.__)("I am established, have my permanent address, or usually reside within <strong>%s</strong>.","woocommerce-eu-vat-number"),b),{strong:Object(u.createElement)("strong",null)}),checked:y,onChange:function(e){S||A(!0),x(e),p("woocommerce-eu-vat-number","location_confirmation",e)}})),null==C||!C.message||null!=C&&C.hidden?null:Object(u.createElement)("div",{className:"wc-eu-vat-checkout-ip-notice__error wc-block-components-validation-error"},C.message))},O=(n(20),n(5)),g=function(e){var t=e.title,n=e.stepHeadingContent;return Object(u.createElement)("div",{className:"wc-block-components-checkout-step__heading"},Object(u.createElement)("h2",{"aria-hidden":"true",className:"wc-block-components-checkout-step__title wc-block-components-title"},t),!!n&&Object(u.createElement)("span",{className:"wc-block-components-checkout-step__heading-content"},n))},j=(r=Object(O.a)({}),function(e){return function(t){var n=function(e,t){var n=[];return Object.keys(e).forEach((function(r){if(void 0!==t[r])switch(e[r].type){case"boolean":n[r]="false"!==t[r]&&!1!==t[r];break;case"number":n[r]=parseInt(t[r],10);break;case"array":case"object":n[r]=JSON.parse(t[r]);break;default:n[r]=t[r]}else n[r]=e[r].default})),n}(r,t);return Object(u.createElement)(e,c()({},t,n))}})((function(e){var t=e.id,n=e.className,r=e.title,o=e.legend,c=e.description,i=e.children,a=e.disabled,s=void 0!==a&&a,l=e.showStepNumber,d=void 0===l||l,p=e.stepHeadingContent,m=void 0===p?function(){}:p,b=o||r?"fieldset":"div";return Object(u.createElement)(b,{className:h()(n,"wc-block-components-checkout-step",{"wc-block-components-checkout-step--with-step-number":d,"wc-block-components-checkout-step--disabled":s}),id:t,disabled:s},!(!o&&!r)&&Object(u.createElement)("legend",{className:"screen-reader-text"},o||r),!!r&&Object(u.createElement)(g,{title:r,stepHeadingContent:m()}),Object(u.createElement)("div",{className:"wc-block-components-checkout-step__container"},!!c&&Object(u.createElement)("p",{className:"wc-block-components-checkout-step__description"},c),Object(u.createElement)("div",{className:"wc-block-components-checkout-step__content"},i)))})),y=Object(b.withInstanceId)((function(e){var t,n,r,o=e.validation,c=o.setValidationErrors,i=o.clearValidationError,d=o.getValidationError,p=e.checkoutExtensionData,b=Object(_.useSelect)((function(e){var t=e("wc/store/cart").getCartData();return{cartItems:t.items,billingAddress:t.billingAddress,extensions:t.extensions,needsShipping:t.needsShipping}})),v=b.billingAddress,O=b.extensions,g=wc_eu_vat_params,y=g.b2b_required,x=g.eu_countries,E=g.uk_ni_notice,k=g.input_label,S=g.input_description,A=g.failure_handler,N=e.title,P=void 0===N?Object(l.__)("VAT Number","woocommerce-eu-vat-number"):N,T=e.description,C=void 0===T?"":T,V=e.showStepNumber,I=void 0===V||V,D=Object(f.getSetting)("woocommerce-eu-vat-number_data"),M=D.woocommerce_eu_vat_number_validate_ip,B=D.ip_address,U=D.ip_country,Z="yes"===M,q=Object(u.useState)(!1),H=m()(q,2),J=H[0],L=H[1],F=Object(u.useState)(null===(t=O["woocommerce-eu-vat-number"])||void 0===t?void 0:t.vat_number),R=m()(F,2),G=R[0],$=R[1],K=Object(u.useState)(null===(n=O["woocommerce-eu-vat-number"])||void 0===n?void 0:n.vat_number),Y=m()(K,2),X=Y[0],z=Y[1],Q=Object(u.useState)("yes"===y&&-1!==x.indexOf(v.country)),W=m()(Q,1)[0],ee=Object(u.useState)(-1!==x.indexOf(v.country)),te=m()(ee,2),ne=te[0],re=te[1],oe=Object(u.useState)("GB"===v.country),ce=m()(oe,2),ie=ce[0],ae=ce[1],ue="billing_vat_number_error",se=d(ue),le=!1===(null==se?void 0:se.hidden)&&""!==(null==se?void 0:se.message);return Object(u.useEffect)((function(){p.setExtensionData("woocommerce-eu-vat-number","location_confirmation",!1)}),[p.setExtensionData]),Object(u.useEffect)((function(){re(-1!==x.indexOf(v.country)),ae("GB"===v.country)}),[x,v.country]),Object(u.useEffect)((function(){!W||"string"==typeof G&&G.length>0||c(a()({},ue,{message:Object(l.__)("VAT number is required.","woocommerce-eu-vat-number"),hidden:!0}))}),[W,c,ue]),Object(u.useEffect)((function(){var e,t,n,r=d(ue);!G&&null!=r&&r.hidden||((W||G)&&null!==(e=O["woocommerce-eu-vat-number"])&&void 0!==e&&null!==(t=e.validation)&&void 0!==t&&t.error?c(a()({},ue,{message:null===(n=O["woocommerce-eu-vat-number"])||void 0===n?void 0:n.validation.error,hidden:!1})):i(ue))}),[null===(r=O["woocommerce-eu-vat-number"])||void 0===r?void 0:r.validation.error]),Object(u.useEffect)((function(){var e,t,n,r,o,i,u;"string"==typeof G&&G.length>0&&(o=v.country,i=G,(!(u={AT:"U[A-Z\\d]{8}",BE:"0\\d{9}",BG:"\\d{9,10}",CY:"\\d{8}[A-Z]",CZ:"\\d{8,10}",DE:"\\d{9}",DK:"(\\d{2} ?){3}\\d{2}",EE:"\\d{9}",EL:"\\d{9}",ES:"[A-Z]\\d{7}[A-Z]|\\d{8}[A-Z]|[A-Z]\\d{8}",FI:"\\d{8}",FR:"([A-Z]{2}|[A-Z0-9]{2})\\d{9}",XI:"\\d{9}|\\d{12}|(GD|HA)\\d{3}",HR:"\\d{11}",HU:"\\d{8}",IE:"[A-Z\\d]{8,10}",IT:"\\d{11}",LT:"(\\d{9}|\\d{12})",LU:"\\d{8}",LV:"\\d{11}",MT:"\\d{8}",NL:"\\d{9}B\\d{2}",PL:"\\d{10}",PT:"\\d{9}",RO:"\\d{2,10}",SE:"\\d{12}",SI:"\\d{8}",SK:"\\d{10}"})[o]||null===new RegExp(u[o]).exec(i))&&"reject"===A||(null===(e=O["woocommerce-eu-vat-number"])||void 0===e||null===(t=e.validation)||void 0===t||!t.valid)&&G===(null===(n=O["woocommerce-eu-vat-number"])||void 0===n?void 0:n.vat_number)&&"reject"===A)&&c(a()({},ue,{message:null===(r=O["woocommerce-eu-vat-number"])||void 0===r?void 0:r.validation.error,hidden:!1}))}),[]),ne?Object(u.createElement)(j,{id:"shipping-fields",className:h()("wc-block-checkout__shipping-fields","eu-vat-extra-css"),title:P,description:C,showStepNumber:I},Object(u.createElement)("div",null,Object(u.createElement)("div",{className:h()("wc-block-components-text-input","eu-vat-extra-css",{"is-active":J||!!G},{"has-error":le})},Object(u.createElement)("input",{type:"text","aria-label":k,id:"billing_vat_number",value:G||"",onChange:function(e){!function(e){var t=e.target.value;i(ue),"string"==typeof t&&0===t.length&&W&&c(a()({},ue,{message:Object(l.__)("VAT Number is required.","woocommerce-eu-vat-number"),hidden:!1})),$(t)}(e)},onFocus:function(){return L(!0)},onBlur:function(){L(!1),G!==X&&(i(ue),W&&(null==G||"string"==typeof G&&0===G.length)&&c(a()({},ue,{message:Object(l.__)("VAT number is required.","woocommerce-eu-vat-number"),hidden:!1})),Object(s.extensionCartUpdate)({namespace:"woocommerce-eu-vat-number",data:{vat_number:G},cartPropsToReceive:["extensions"]}).then((function(){z(G),W||G||i(ue)})))},"aria-invalid":!0===le,disabled:!1,required:W}),Object(u.createElement)("label",{htmlFor:"billing_vat_number"},k,!0===W?null:" (optional)"),Object(u.createElement)((function(){var e;return le?Object(u.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},Object(u.createElement)("p",{id:ue},null===(e=d(ue))||void 0===e?void 0:e.message)):null}),null),Object(u.createElement)("div",{className:"wc-eu-vat-checkout-uk-notice"},Object(u.createElement)("div",null,Object(u.createElement)("span",null,S)),Object(u.createElement)("span",null,ie?E:null))),!G&&"no"===y||!G&&!y?Object(u.createElement)(w,{validation:e.validation,ipAddress:B,ipCountry:U,billingCountry:v.country,shouldValidateIp:Z,checkoutExtensionData:p}):null)):Object(u.createElement)(u.Fragment,null)}));function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={metadata:E(E({},d),{},{attributes:E(E({},d.attributes),Object(O.a)({defaultTitle:Object(l.__)("VAT Number","woocommerce-eu-vat-number"),defaultDescription:"",defaultShowStepNumber:!0}))}),component:function(e){return Object(u.createElement)(y,c()({isEditing:!1},e))}};Object(s.registerCheckoutBlock)(k)}]);